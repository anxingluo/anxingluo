(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e401373a","chunk-510f4ae3"],{"39d1":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page",style:{height:0==e.total1?"400px":"auto"}},[e.total1?a("el-pagination",{attrs:{"current-page":e.pagenum,"page-sizes":[3,5,10,15,20],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total1},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}):a("el-empty",{attrs:{description:"暂无数据"}})],1)},r=[],i=(a("96cf"),a("1da1")),s={name:"paginationPage",props:["total1","pagenum1","pagesize1"],data:function(){return{pagenum:this.pagenum1,pagesize:this.pagesize1}},methods:{handleSizeChange:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.pagesize=e,t.$emit("pageChange",{pagenum:t.pagenum,pagesize:t.pagesize});case 2:case"end":return a.stop()}}),a)})))()},handleCurrentChange:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.pagenum=e,t.$emit("pageChange",{pagenum:t.pagenum,pagesize:t.pagesize});case 2:case"end":return a.stop()}}),a)})))()}}},c=s,o=(a("b139"),a("2877")),u=Object(o["a"])(c,n,r,!1,null,null,null);t["a"]=u.exports},"3b5d":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",[a("el-button",{staticStyle:{margin:"10px 0"},attrs:{type:"success",plain:""},on:{click:function(t){return e.openEdit({type:"add"})}}},[e._v("添加分类")]),e.tableData.length?a("el-table",{staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:e.tableData,"row-key":"cat_id",border:"","tree-props":{children:"children",hasChildren:"hasChildren"}}},[a("el-table-column",{attrs:{prop:"cat_name",label:"分类名称"}}),a("el-table-column",{attrs:{prop:"cat_level",label:"级别",formatter:function(e){return 0==e.cat_level?"一级":1==e.cat_level?"二级":"三级"}}}),a("el-table-column",{attrs:{prop:"cat_deleted",label:"是否有效",formatter:function(e){return e.cat_deleted?"无效":"有效"}}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(a){return e.openEdit({data:t.row,type:"edit"})}}},[e._v("编辑")]),a("el-button",{attrs:{type:"danger",plain:""},on:{click:function(a){return e.deleteCategories(t.row.cat_id)}}},[e._v("删除")])]}}],null,!1,1373814771)})],1):e._e(),a("paginationPage",{ref:"categoriesPage",attrs:{total1:e.total,pagenum1:e.pagenum,pagesize1:e.pagesize},on:{pageChange:e.pPageChange}}),a("Edit",{ref:"categoriesEdit",attrs:{type:e.openType},on:{updateList:e.getCategoriesList}})],1)},r=[],i=(a("a434"),a("5530")),s=(a("96cf"),a("1da1")),c=a("c40e"),o=a("39d1"),u=a("86ca"),l={components:{paginationPage:o["a"],Edit:u["default"]},data:function(){return{tableData:[],categoriesList:[],total:0,pagenum:1,pagesize:5,openType:""}},methods:{getCategoriesList:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["j"])();case 2:a=t.sent,200==a.data.meta.status?(e.categoriesList=a.data.data,e.total=e.categoriesList.length,e.tableData=JSON.parse(JSON.stringify(e.categoriesList)).splice(e.pagesize*(e.pagenum-1),e.pagesize)):e.$message.error(a.data.meta.msg);case 4:case"end":return t.stop()}}),t)})))()},pPageChange:function(e){this.pagenum=e.pagenum,this.pagesize=e.pagesize,this.tableData=JSON.parse(JSON.stringify(this.categoriesList)).splice(this.pagesize*(this.pagenum-1),this.pagesize)},openEdit:function(e){if(this.openType=e.type,this.$refs.categoriesEdit.dialogFormVisible=!0,"edit"==e.type){var t=Object(i["a"])({},e.data);this.$delete(t,"children"),this.$refs.categoriesEdit.formData=t}},deleteCategories:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.$confirm("此操作将永久删除该商品分类, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(s["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(c["f"])(e);case 2:n=a.sent,201==n.data.meta.status||200==n.data.meta.status?(t.$message.success(n.data.meta.msg),t.getCategoriesList(),1==t.tableData.length&&(t.pagenum-=1)):t.$message.error(n.data.meta.msg);case 4:case"end":return a.stop()}}),a)})))).catch((function(){t.$message({type:"info",message:"已取消删除"})}));case 1:case"end":return a.stop()}}),a)})))()}},created:function(){this.getCategoriesList()}},d=l,p=a("2877"),g=Object(p["a"])(d,n,r,!1,null,null,null);t["default"]=g.exports},"86ca":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"edit"},[a("el-dialog",{attrs:{title:"add"==e.type?"添加商品分类":"编辑商品分类",visible:e.dialogFormVisible,center:!0},on:{"update:visible":function(t){e.dialogFormVisible=t},closed:e.clearfrom}},[a("el-form",{ref:"editForm",attrs:{rules:e.rules,model:e.formData,"label-width":"150px","status-icon":""}},[a("el-form-item",{attrs:{label:"分类名称",prop:"cat_name"}},[a("el-input",{model:{value:e.formData.cat_name,callback:function(t){e.$set(e.formData,"cat_name",t)},expression:"formData.cat_name"}})],1),"add"==e.type?a("el-form-item",{attrs:{label:"所属分类"}},[a("cascaderCom",{ref:"categoriesCas",attrs:{casOption:e.options,casDataType:e.dataType},on:{clickValue:e.casChange}})],1):e._e()],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.send}},[e._v("确 定")])],1)],1)],1)},r=[],i=a("5530"),s=(a("96cf"),a("1da1")),c=a("c40e"),o=a("aa34"),u=0,l=0,d={name:"categoriesEdit",components:{cascaderCom:o["a"]},props:["type"],data:function(){return{dialogFormVisible:!1,formData:{},options:[],dataType:{expandTrigger:"hover",label:"cat_name",value:"cat_id",text:"默认一级分类",checkStrictly:!0,show:!0},rules:{cat_name:[{required:!0,message:"分类名称不能为空",trigger:"blur"}]}}},methods:{clearfrom:function(){this.formData={},"add"==this.type&&(this.$refs.categoriesCas.addValue=[],u=0,l=0),this.$refs.editForm.resetFields()},send:function(){var e=this;this.$refs.editForm.validate(function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(a){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:if(n="","add"!=e.type){t.next=11;break}return e.$set(e.formData,"cat_pid",u),e.$set(e.formData,"cat_level",l),t.next=8,Object(c["b"])(e.formData);case 8:n=t.sent,t.next=14;break;case 11:return t.next=13,Object(c["h"])(Object(i["a"])({},e.formData));case 13:n=t.sent;case 14:201===n.data.meta.status||200===n.data.meta.status?(e.$message.success(n.data.meta.msg),e.dialogFormVisible=!1,e.$emit("updateList")):e.$message.error(n.data.meta.msg);case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},getCategoriesList:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("add"!=e.type){t.next=5;break}return t.next=3,Object(c["j"])("2");case 3:a=t.sent,200==a.data.meta.status&&(e.options=a.data.data);case 5:case"end":return t.stop()}}),t)})))()},casChange:function(e){u=e[e.length-1],l=e.length}},watch:{dialogFormVisible:function(e){return"add"==this.type&&this.getCategoriesList(),e}}},p=d,g=a("2877"),f=Object(g["a"])(p,n,r,!1,null,null,null);t["default"]=f.exports},"99af":function(e,t,a){"use strict";var n=a("23e7"),r=a("d039"),i=a("e8b5"),s=a("861d"),c=a("7b0b"),o=a("50c4"),u=a("8418"),l=a("65f0"),d=a("1dde"),p=a("b622"),g=a("2d00"),f=p("isConcatSpreadable"),m=9007199254740991,h="Maximum allowed index exceeded",b=g>=51||!r((function(){var e=[];return e[f]=!1,e.concat()[0]!==e})),v=d("concat"),y=function(e){if(!s(e))return!1;var t=e[f];return void 0!==t?!!t:i(e)},w=!b||!v;n({target:"Array",proto:!0,forced:w},{concat:function(e){var t,a,n,r,i,s=c(this),d=l(s,0),p=0;for(t=-1,n=arguments.length;t<n;t++)if(i=-1===t?s:arguments[t],y(i)){if(r=o(i.length),p+r>m)throw TypeError(h);for(a=0;a<r;a++,p++)a in i&&u(d,p,i[a])}else{if(p>=m)throw TypeError(h);u(d,p++,i)}return d.length=p,d}})},a434:function(e,t,a){"use strict";var n=a("23e7"),r=a("23cb"),i=a("a691"),s=a("50c4"),c=a("7b0b"),o=a("65f0"),u=a("8418"),l=a("1dde"),d=a("ae40"),p=l("splice"),g=d("splice",{ACCESSORS:!0,0:0,1:2}),f=Math.max,m=Math.min,h=9007199254740991,b="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!p||!g},{splice:function(e,t){var a,n,l,d,p,g,v=c(this),y=s(v.length),w=r(e,y),x=arguments.length;if(0===x?a=n=0:1===x?(a=0,n=y-w):(a=x-2,n=m(f(i(t),0),y-w)),y+a-n>h)throw TypeError(b);for(l=o(v,n),d=0;d<n;d++)p=w+d,p in v&&u(l,d,v[p]);if(l.length=n,a<n){for(d=w;d<y-n;d++)p=d+n,g=d+a,p in v?v[g]=v[p]:delete v[g];for(d=y;d>y-n+a;d--)delete v[d-1]}else if(a>n)for(d=y-n;d>w;d--)p=d+n-1,g=d+a-1,p in v?v[g]=v[p]:delete v[g];for(d=0;d<a;d++)v[d+w]=arguments[d+2];return v.length=y-n+a,l}})},aa34:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.casOption?a("el-cascader",{ref:"myCas",attrs:{options:e.casOption,props:e.casDataType,placeholder:e.casDataType.text,"show-all-levels":e.casDataType.show,clearable:""},on:{change:e.handleChange},model:{value:e.addValue,callback:function(t){e.addValue=t},expression:"addValue"}}):e._e()},r=[],i={props:["casOption","casDataType","casValue"],data:function(){return{addValue:[]}},methods:{handleChange:function(e){this.$emit("clickValue",e)}},watch:{casValue:function(e){this.addValue=e}}},s=i,c=a("2877"),o=Object(c["a"])(s,n,r,!1,null,null,null);t["a"]=o.exports},b139:function(e,t,a){"use strict";var n=a("ecb0"),r=a.n(n);r.a},c40e:function(e,t,a){"use strict";a.d(t,"l",(function(){return i})),a.d(t,"m",(function(){return s})),a.d(t,"c",(function(){return c})),a.d(t,"i",(function(){return o})),a.d(t,"e",(function(){return u})),a.d(t,"j",(function(){return l})),a.d(t,"k",(function(){return f})),a.d(t,"d",(function(){return m})),a.d(t,"g",(function(){return h})),a.d(t,"a",(function(){return b})),a.d(t,"f",(function(){return g})),a.d(t,"b",(function(){return d})),a.d(t,"h",(function(){return p}));a("99af");var n=a("5530"),r=a("b775");function i(e){return r["a"].get("goods",{params:Object(n["a"])({},e)})}function s(e){return r["a"].get("goods/".concat(e))}function c(e){return r["a"].post("goods",Object(n["a"])({},e))}function o(e){return r["a"].put("goods/".concat(e.id),Object(n["a"])({},e))}function u(e){return r["a"].delete("goods/".concat(e))}function l(e){return r["a"].get("categories",{params:{type:e}})}function d(e){return r["a"].post("categories",Object(n["a"])({},e))}function p(e){return r["a"].put("categories/".concat(e.cat_id),Object(n["a"])({},e))}function g(e){return r["a"].delete("categories/".concat(e))}function f(e){return r["a"].get("categories/".concat(e.id,"/attributes"),{params:Object(n["a"])({},e)})}function m(e){return r["a"].delete("categories/".concat(e.id,"/attributes/").concat(e.attrid))}function h(e){return r["a"].put("categories/".concat(e.cat_id,"/attributes/").concat(e.attr_id),Object(n["a"])({},e))}function b(e){return r["a"].post("categories/".concat(e.cat_id,"/attributes"),Object(n["a"])({},e))}},ecb0:function(e,t,a){}}]);