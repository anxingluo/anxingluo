(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-610aac20"],{"18dc":function(e,t,r){},"6f3f":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"roles"},[r("el-button",{attrs:{type:"success",icon:"el-icon-plus"},on:{click:function(t){return e.showBox("add")}}},[e._v("添加角色")]),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.rolesList,border:"","row-key":"id","tree-props":{hasChildren:"hasChildren",children:"null"}}},[r("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[0!=t.row.children.length?e._l(t.row.children,(function(n){return r("div",{key:n.id,staticClass:"bigBox"},[r("div",[r("el-tag",{key:n.id,attrs:{closable:"",type:""},on:{close:function(r){return e.removeRolesRights(t.row.id,n.id)}}},[e._v(" "+e._s(n.authName)+" ")])],1),r("div",e._l(n.children,(function(n){return r("div",{key:n.id,staticClass:"bigBox"},[r("div",[r("el-tag",{key:n.id,attrs:{closable:"",type:"success"},on:{close:function(r){return e.removeRolesRights(t.row.id,n.id)}}},[e._v(" "+e._s(n.authName)+" ")])],1),r("div",{staticClass:"MBox"},e._l(n.children,(function(n){return r("div",{key:n.id},[r("el-tag",{key:n.id,attrs:{closable:"",type:"warning"},on:{close:function(r){return e.removeRolesRights(t.row.id,n.id)}}},[e._v(" "+e._s(n.authName)+" ")])],1)})),0)])})),0)])})):[r("div",[e._v(" 暂未分配权限 ")])]]}}])}),r("el-table-column",{attrs:{label:"序号",type:"index",width:"50px"}}),r("el-table-column",{attrs:{label:"角色名称",prop:"roleName"}}),r("el-table-column",{attrs:{label:"角色描述",prop:"roleDesc"}}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",icon:"el-icon-edit-outline"},on:{click:function(r){return e.showBox("edit",t.row)}}},[e._v("编辑")]),r("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(r){return e.deleteRoles(t.row.id)}}},[e._v("删除")]),r("el-button",{attrs:{type:"warning",icon:"el-icon-s-tools"},on:{click:function(r){return e.showBox("allot",t.row)}}},[e._v("分配")])]}}])})],1),r("addOrEdit",{ref:"addOrEdit"})],1)},s=[],a=(r("4160"),r("d81d"),r("159b"),r("96cf"),r("1da1")),i=r("f423"),o=r("9bdd9"),c=[],l={data:function(){return{rolesList:[],rowKeyS:[]}},components:{addOrEdit:i["default"]},methods:{showBox:function(e,t){"add"==e?(this.$refs.addOrEdit.titleText="添加角色",this.$refs.addOrEdit.rolesForm={roleName:"",roleDesc:""}):"edit"==e?(this.$refs.addOrEdit.titleText="编辑角色",this.$refs.addOrEdit.rolesForm=JSON.parse(JSON.stringify(t))):(c=[],this.charId(t.children),this.$refs.addOrEdit.titleText="权限分配",this.$refs.addOrEdit.rolesRights=JSON.parse(JSON.stringify(t)),this.$refs.addOrEdit.selectArr=c),this.$refs.addOrEdit.dialogFormVisible=!0},charId:function(e){var t=this;e.forEach((function(e){c.push(e.id),e.children&&0!=e.children.length&&t.charId(e.children)}))},deleteRoles:function(e){var t=this;this.$confirm("此操作将永久删除该角色, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(a["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(o["b"])(e);case 2:if(n=r.sent,200==n.data.meta.status){r.next=5;break}return r.abrupt("return",t.$message.error(n.statusText));case 5:t.getRolesList(),t.$message({type:"success",message:n.data.meta.msg});case 7:case"end":return r.stop()}}),r)})))).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},removeRolesRights:function(e,t){var r=this;this.$confirm("此操作将删除该权限及其子权限, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(a["a"])(regeneratorRuntime.mark((function n(){var s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(o["f"])({roleId:e,rightId:t});case 2:if(s=n.sent,200==s.data.meta.status){n.next=5;break}return n.abrupt("return",r.$message.error(s.data.meta.msg));case 5:r.rolesList=r.rolesList.map((function(t){return t.id==e&&(t.children=s.data.data),t})),r.$message({type:"success",message:s.data.meta.msg});case 7:case"end":return n.stop()}}),n)})))).catch((function(){r.$message({type:"info",message:"已取消删除"})}))},getRolesList:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["e"])();case 2:if(r=t.sent,200==r.data.meta.status){t.next=5;break}return t.abrupt("return",e.$message.error(r.data.meta.msg));case 5:e.rolesList=r.data.data;case 6:case"end":return t.stop()}}),t)})))()}},created:function(){this.getRolesList()}},d=l,u=(r("8f86"),r("2877")),f=Object(u["a"])(d,n,s,!1,null,"2197c9ed",null);t["default"]=f.exports},"8f86":function(e,t,r){"use strict";var n=r("18dc"),s=r.n(n);s.a}}]);