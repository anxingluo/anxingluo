(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3703cc14"],{"469b":function(e,r,t){"use strict";t.r(r);var a=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"edit"},[t("el-dialog",{attrs:{title:"add"===e.fromkey?"添加用户":"edit"===e.fromkey?"用户修改":"分配角色",visible:e.dialogFormVisible,center:!0},on:{"update:visible":function(r){e.dialogFormVisible=r},closed:e.clearfrom}},[t("el-form",{ref:"editForm",attrs:{rules:e.rules,model:e.formdata,"label-width":"100px","status-icon":""}},["role"!==e.fromkey?t("el-form-item",{attrs:{label:"用户名",prop:"username"}},[t("el-input",{attrs:{disabled:"add"!==e.fromkey},model:{value:e.formdata.username,callback:function(r){e.$set(e.formdata,"username",r)},expression:"formdata.username"}})],1):e._e(),"add"===e.fromkey?t("el-form-item",{attrs:{label:"密码",prop:"password"}},[t("el-input",{model:{value:e.formdata.password,callback:function(r){e.$set(e.formdata,"password",r)},expression:"formdata.password"}})],1):e._e(),"role"!==e.fromkey?t("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[t("el-input",{model:{value:e.formdata.email,callback:function(r){e.$set(e.formdata,"email",r)},expression:"formdata.email"}})],1):e._e(),"role"!==e.fromkey?t("el-form-item",{attrs:{label:"电话",prop:"mobile"}},[t("el-input",{model:{value:e.formdata.mobile,callback:function(r){e.$set(e.formdata,"mobile",r)},expression:"formdata.mobile"}})],1):e._e(),"role"===e.fromkey?t("el-form-item",{attrs:{label:"用户名"}},[e._v(" "+e._s(e.formdata.username)+" ")]):e._e(),"role"===e.fromkey?t("el-form-item",{attrs:{label:"请选择角色",prop:"role"}},[t("el-select",{attrs:{placeholder:"请选择当前角色"},model:{value:e.formdata.rid,callback:function(r){e.$set(e.formdata,"rid",r)},expression:"formdata.rid"}},e._l(e.options,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value,disabled:-1===e.value}})})),1)],1):e._e()],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(r){e.dialogFormVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.send}},[e._v("确 定")])],1)],1)],1)},n=[],o=(t("4160"),t("159b"),t("96cf"),t("1da1")),i=t("c24f"),s=t("9bdd9"),u={name:"edit",data:function(){return{dialogFormVisible:!1,formdata:{id:"",username:"",password:"",email:"",mobile:"",rid:""},options:[{label:"请选择角色",value:-1}],fromkey:"",rules:{username:[{required:!0,message:"用户名不能为空",trigger:"blur"},{min:2,max:6,message:"用户名长度为 2 - 6 个字符",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"},{min:6,max:12,message:"密码为 6 - 12 个字符",trigger:"blur"}],email:[{required:!0,validator:function(e,r,t){if(!/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/.test(r))return t(new Error("请输入正确邮箱地址"));t()},trigger:"blur"}],mobile:[{required:!0,validator:function(e,r,t){if(!/^1(3|4|5|6|7|8|9)\d{9}$/.test(r))return t(new Error("请输入正确的手机号"));t()},trigger:"blur"}],rid:[{required:!0,message:"请选择角色",trigger:"blur"}]}}},methods:{clearfrom:function(){this.formdata={},this.$refs.editForm.resetFields()},send:function(){var e=this;this.$refs.editForm.validate(function(){var r=Object(o["a"])(regeneratorRuntime.mark((function r(t){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t){r.next=2;break}return r.abrupt("return");case 2:if(a=null,"add"!==e.fromkey){r.next=9;break}return r.next=6,Object(i["a"])(e.formdata);case 6:a=r.sent,r.next=19;break;case 9:if("edit"!==e.fromkey){r.next=15;break}return r.next=12,Object(i["b"])(e.formdata);case 12:a=r.sent,r.next=19;break;case 15:if("role"!==e.fromkey){r.next=19;break}return r.next=18,Object(i["f"])(e.formdata);case 18:a=r.sent;case 19:201===a.data.meta.status||200===a.data.meta.status?(e.$message.success(a.data.meta.msg),e.dialogFormVisible=!1,e.$parent.getUserList()):e.$message.error(a.data.meta.msg);case 20:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())},getRoles:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var t;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(s["e"])();case 2:t=r.sent,200===t.status&&t.data.data.forEach((function(r){e.options.push({label:r.roleName,value:r.id})}));case 4:case"end":return r.stop()}}),r)})))()},getRole:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var t;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if("role"!==e.fromkey){r.next=5;break}return r.next=3,Object(i["c"])(e.formdata.id);case 3:t=r.sent,200===t.data.meta.status&&(e.formdata=t.data.data);case 5:case"end":return r.stop()}}),r)})))()}},created:function(){this.getRoles()},watch:{dialogFormVisible:function(e){!0===e&&this.getRole()}}},l=u,c=t("2877"),d=Object(c["a"])(l,a,n,!1,null,null,null);r["default"]=d.exports},"99af":function(e,r,t){"use strict";var a=t("23e7"),n=t("d039"),o=t("e8b5"),i=t("861d"),s=t("7b0b"),u=t("50c4"),l=t("8418"),c=t("65f0"),d=t("1dde"),f=t("b622"),m=t("2d00"),b=f("isConcatSpreadable"),p=9007199254740991,g="Maximum allowed index exceeded",v=m>=51||!n((function(){var e=[];return e[b]=!1,e.concat()[0]!==e})),k=d("concat"),h=function(e){if(!i(e))return!1;var r=e[b];return void 0!==r?!!r:o(e)},w=!v||!k;a({target:"Array",proto:!0,forced:w},{concat:function(e){var r,t,a,n,o,i=s(this),d=c(i,0),f=0;for(r=-1,a=arguments.length;r<a;r++)if(o=-1===r?i:arguments[r],h(o)){if(n=u(o.length),f+n>p)throw TypeError(g);for(t=0;t<n;t++,f++)t in o&&l(d,f,o[t])}else{if(f>=p)throw TypeError(g);l(d,f++,o)}return d.length=f,d}})},"9bdd9":function(e,r,t){"use strict";t.d(r,"d",(function(){return o})),t.d(r,"e",(function(){return i})),t.d(r,"b",(function(){return s})),t.d(r,"a",(function(){return u})),t.d(r,"c",(function(){return l})),t.d(r,"f",(function(){return c})),t.d(r,"g",(function(){return d}));t("99af");var a=t("5530"),n=t("b775");function o(e){return e=e||"list",n["a"].get("/rights/".concat(e))}function i(){return n["a"].get("/roles")}function s(e){return n["a"].delete("roles/".concat(e))}function u(e){return n["a"].post("roles",Object(a["a"])({},e))}function l(e){return n["a"].put("roles/".concat(e.id),Object(a["a"])({},e))}function c(e){return n["a"].delete("roles/".concat(e.roleId,"/rights/").concat(e.rightId))}function d(e,r){return n["a"].post("roles/".concat(e,"/rights"),{rids:r})}},c24f:function(e,r,t){"use strict";t.d(r,"d",(function(){return n})),t.d(r,"g",(function(){return o})),t.d(r,"a",(function(){return i})),t.d(r,"b",(function(){return s})),t.d(r,"e",(function(){return u})),t.d(r,"c",(function(){return l})),t.d(r,"f",(function(){return c}));t("99af");var a=t("b775");function n(e){return a["a"].get("/users",{params:{pagenum:e.pagenum||1,pagesize:e.pagesize||3,query:e.query||null}})}function o(e,r){return a["a"].put("/users/".concat(e,"/state/").concat(r))}function i(e){var r=e.username,t=e.password,n=e.email,o=e.mobile;return a["a"].post("/users",{username:r,password:t,email:n||null,mobile:o||null})}function s(e){var r=e.id,t=e.email,n=e.mobile;return a["a"].put("users/".concat(r),{email:t,mobile:n})}function u(e){return a["a"].delete("users/".concat(e))}function l(e){return a["a"].get("users/".concat(e))}function c(e){var r=e.id,t=e.rid;return a["a"].put("users/".concat(r,"/role"),{rid:t})}}}]);