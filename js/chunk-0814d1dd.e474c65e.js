(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0814d1dd","chunk-3703cc14"],{"39d1":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page",style:{height:0==e.total1?"400px":"auto"}},[e.total1?a("el-pagination",{attrs:{"current-page":e.pagenum,"page-sizes":[3,5,10,15,20],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total1},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}):a("el-empty",{attrs:{description:"暂无数据"}})],1)},n=[],i=(a("96cf"),a("1da1")),o={name:"paginationPage",props:["total1","pagenum1","pagesize1"],data:function(){return{pagenum:this.pagenum1,pagesize:this.pagesize1}},methods:{handleSizeChange:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.pagesize=e,t.$emit("pageChange",{pagenum:t.pagenum,pagesize:t.pagesize});case 2:case"end":return a.stop()}}),a)})))()},handleCurrentChange:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.pagenum=e,t.$emit("pageChange",{pagenum:t.pagenum,pagesize:t.pagesize});case 2:case"end":return a.stop()}}),a)})))()}}},s=o,u=(a("b139"),a("2877")),c=Object(u["a"])(s,r,n,!1,null,null,null);t["a"]=c.exports},"44a5":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("el-input",{style:{width:"30%"},attrs:{placeholder:"请输入搜索内容"},on:{change:e.getUserList},model:{value:e.searchvalue,callback:function(t){e.searchvalue=t},expression:"searchvalue"}}),a("el-button",{attrs:{icon:"el-icon-search"},on:{click:e.getUserList}},[e._v("搜索")]),a("el-button",{attrs:{type:"success",icon:"el-icon-plus"},on:{click:e.add}},[e._v("添加用户")])],1),a("div",[e.total?a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50",align:"center"}}),a("el-table-column",{attrs:{prop:"username",label:"姓名",width:"180",align:"center"}}),a("el-table-column",{attrs:{prop:"email",label:"邮箱",width:"300",align:"center"}}),a("el-table-column",{attrs:{prop:"mobile",label:"电话",width:"250",align:"center"}}),a("el-table-column",{attrs:{label:"用户状态",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(a){return e.setType(t.row)}},model:{value:t.row.mg_state,callback:function(a){e.$set(t.row,"mg_state",a)},expression:"scope.row.mg_state"}})]}}],null,!1,3201229839)}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",plain:""},on:{click:function(a){return e.edit(t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",plain:""},on:{click:function(a){return e.remove(t.row.id)}}},[e._v("删除")]),a("el-button",{attrs:{type:"warning",icon:"el-icon-user",plain:""},on:{click:function(a){return e.roleEdit(t.row)}}},[e._v("角色")])]}}],null,!1,2674656292)})],1):e._e(),a("paginationPage",{attrs:{total1:e.total,pagenum1:e.pagenum,pagesize1:e.pagesize},on:{pageChange:e.pageChangeFn}})],1),a("edit",{ref:"editoradd"})],1)},n=[],i=(a("96cf"),a("1da1")),o=a("c24f"),s=a("39d1"),u=a("469b"),c={name:"users",data:function(){return{searchvalue:"",tableData:[],total:0,pagenum:1,pagesize:3}},components:{edit:u["default"],paginationPage:s["a"]},methods:{getUserList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["d"])({pagenum:e.pagenum,pagesize:e.pagesize,query:e.searchvalue});case 2:a=t.sent,200===a.data.meta.status?(e.tableData=a.data.data.users,e.total=a.data.data.total,e.pagenum=a.data.data.pagenum):e.$message.error(a.data.meta.msg);case 4:case"end":return t.stop()}}),t)})))()},setType:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(o["g"])(e.id,e.mg_state);case 2:r=a.sent,200===r.data.meta.status?1===r.data.data.mg_state?t.$message.success("启用成功"):t.$message.success("禁用成功"):t.$message.error(r.data.meta.msg);case 4:case"end":return a.stop()}}),a)})))()},pageChangeFn:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.pagesize=e.pagesize,t.pagenum=e.pagenum,t.getUserList();case 3:case"end":return a.stop()}}),a)})))()},add:function(){this.$refs.editoradd.dialogFormVisible=!0,this.$refs.editoradd.fromkey="add"},edit:function(e){this.$refs.editoradd.dialogFormVisible=!0,this.$refs.editoradd.fromkey="edit",this.$refs.editoradd.formdata=JSON.parse(JSON.stringify(e))},remove:function(e){var t=this;this.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(i["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(o["e"])(e);case 2:r=a.sent,200===r.data.meta.status?(t.$message.success(r.data.meta.msg),1==t.tableData.length&&(t.pagenum-=1),t.getUserList()):t.$message.error(r.data.meta.msg);case 4:case"end":return a.stop()}}),a)})))).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},roleEdit:function(e){this.$refs.editoradd.dialogFormVisible=!0,this.$refs.editoradd.fromkey="role",this.$refs.editoradd.formdata=JSON.parse(JSON.stringify(e))}},created:function(){this.getUserList()}},l=c,d=a("2877"),m=Object(d["a"])(l,r,n,!1,null,"2acca181",null);t["default"]=m.exports},"469b":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"edit"},[a("el-dialog",{attrs:{title:"add"===e.fromkey?"添加用户":"edit"===e.fromkey?"用户修改":"分配角色",visible:e.dialogFormVisible,center:!0},on:{"update:visible":function(t){e.dialogFormVisible=t},closed:e.clearfrom}},[a("el-form",{ref:"editForm",attrs:{rules:e.rules,model:e.formdata,"label-width":"100px","status-icon":""}},["role"!==e.fromkey?a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{attrs:{disabled:"add"!==e.fromkey},model:{value:e.formdata.username,callback:function(t){e.$set(e.formdata,"username",t)},expression:"formdata.username"}})],1):e._e(),"add"===e.fromkey?a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{model:{value:e.formdata.password,callback:function(t){e.$set(e.formdata,"password",t)},expression:"formdata.password"}})],1):e._e(),"role"!==e.fromkey?a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{model:{value:e.formdata.email,callback:function(t){e.$set(e.formdata,"email",t)},expression:"formdata.email"}})],1):e._e(),"role"!==e.fromkey?a("el-form-item",{attrs:{label:"电话",prop:"mobile"}},[a("el-input",{model:{value:e.formdata.mobile,callback:function(t){e.$set(e.formdata,"mobile",t)},expression:"formdata.mobile"}})],1):e._e(),"role"===e.fromkey?a("el-form-item",{attrs:{label:"用户名"}},[e._v(" "+e._s(e.formdata.username)+" ")]):e._e(),"role"===e.fromkey?a("el-form-item",{attrs:{label:"请选择角色",prop:"role"}},[a("el-select",{attrs:{placeholder:"请选择当前角色"},model:{value:e.formdata.rid,callback:function(t){e.$set(e.formdata,"rid",t)},expression:"formdata.rid"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value,disabled:-1===e.value}})})),1)],1):e._e()],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.send}},[e._v("确 定")])],1)],1)],1)},n=[],i=(a("4160"),a("159b"),a("96cf"),a("1da1")),o=a("c24f"),s=a("9bdd9"),u={name:"edit",data:function(){return{dialogFormVisible:!1,formdata:{id:"",username:"",password:"",email:"",mobile:"",rid:""},options:[{label:"请选择角色",value:-1}],fromkey:"",rules:{username:[{required:!0,message:"用户名不能为空",trigger:"blur"},{min:2,max:6,message:"用户名长度为 2 - 6 个字符",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"},{min:6,max:12,message:"密码为 6 - 12 个字符",trigger:"blur"}],email:[{required:!0,validator:function(e,t,a){if(!/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/.test(t))return a(new Error("请输入正确邮箱地址"));a()},trigger:"blur"}],mobile:[{required:!0,validator:function(e,t,a){if(!/^1(3|4|5|6|7|8|9)\d{9}$/.test(t))return a(new Error("请输入正确的手机号"));a()},trigger:"blur"}],rid:[{required:!0,message:"请选择角色",trigger:"blur"}]}}},methods:{clearfrom:function(){this.formdata={},this.$refs.editForm.resetFields()},send:function(){var e=this;this.$refs.editForm.validate(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(a){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:if(r=null,"add"!==e.fromkey){t.next=9;break}return t.next=6,Object(o["a"])(e.formdata);case 6:r=t.sent,t.next=19;break;case 9:if("edit"!==e.fromkey){t.next=15;break}return t.next=12,Object(o["b"])(e.formdata);case 12:r=t.sent,t.next=19;break;case 15:if("role"!==e.fromkey){t.next=19;break}return t.next=18,Object(o["f"])(e.formdata);case 18:r=t.sent;case 19:201===r.data.meta.status||200===r.data.meta.status?(e.$message.success(r.data.meta.msg),e.dialogFormVisible=!1,e.$parent.getUserList()):e.$message.error(r.data.meta.msg);case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},getRoles:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["e"])();case 2:a=t.sent,200===a.status&&a.data.data.forEach((function(t){e.options.push({label:t.roleName,value:t.id})}));case 4:case"end":return t.stop()}}),t)})))()},getRole:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("role"!==e.fromkey){t.next=5;break}return t.next=3,Object(o["c"])(e.formdata.id);case 3:a=t.sent,200===a.data.meta.status&&(e.formdata=a.data.data);case 5:case"end":return t.stop()}}),t)})))()}},created:function(){this.getRoles()},watch:{dialogFormVisible:function(e){!0===e&&this.getRole()}}},c=u,l=a("2877"),d=Object(l["a"])(c,r,n,!1,null,null,null);t["default"]=d.exports},"99af":function(e,t,a){"use strict";var r=a("23e7"),n=a("d039"),i=a("e8b5"),o=a("861d"),s=a("7b0b"),u=a("50c4"),c=a("8418"),l=a("65f0"),d=a("1dde"),m=a("b622"),f=a("2d00"),p=m("isConcatSpreadable"),g=9007199254740991,b="Maximum allowed index exceeded",h=f>=51||!n((function(){var e=[];return e[p]=!1,e.concat()[0]!==e})),v=d("concat"),w=function(e){if(!o(e))return!1;var t=e[p];return void 0!==t?!!t:i(e)},k=!h||!v;r({target:"Array",proto:!0,forced:k},{concat:function(e){var t,a,r,n,i,o=s(this),d=l(o,0),m=0;for(t=-1,r=arguments.length;t<r;t++)if(i=-1===t?o:arguments[t],w(i)){if(n=u(i.length),m+n>g)throw TypeError(b);for(a=0;a<n;a++,m++)a in i&&c(d,m,i[a])}else{if(m>=g)throw TypeError(b);c(d,m++,i)}return d.length=m,d}})},"9bdd9":function(e,t,a){"use strict";a.d(t,"d",(function(){return i})),a.d(t,"e",(function(){return o})),a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return u})),a.d(t,"c",(function(){return c})),a.d(t,"f",(function(){return l})),a.d(t,"g",(function(){return d}));a("99af");var r=a("5530"),n=a("b775");function i(e){return e=e||"list",n["a"].get("/rights/".concat(e))}function o(){return n["a"].get("/roles")}function s(e){return n["a"].delete("roles/".concat(e))}function u(e){return n["a"].post("roles",Object(r["a"])({},e))}function c(e){return n["a"].put("roles/".concat(e.id),Object(r["a"])({},e))}function l(e){return n["a"].delete("roles/".concat(e.roleId,"/rights/").concat(e.rightId))}function d(e,t){return n["a"].post("roles/".concat(e,"/rights"),{rids:t})}},b139:function(e,t,a){"use strict";var r=a("ecb0"),n=a.n(r);n.a},c24f:function(e,t,a){"use strict";a.d(t,"d",(function(){return n})),a.d(t,"g",(function(){return i})),a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return s})),a.d(t,"e",(function(){return u})),a.d(t,"c",(function(){return c})),a.d(t,"f",(function(){return l}));a("99af");var r=a("b775");function n(e){return r["a"].get("/users",{params:{pagenum:e.pagenum||1,pagesize:e.pagesize||3,query:e.query||null}})}function i(e,t){return r["a"].put("/users/".concat(e,"/state/").concat(t))}function o(e){var t=e.username,a=e.password,n=e.email,i=e.mobile;return r["a"].post("/users",{username:t,password:a,email:n||null,mobile:i||null})}function s(e){var t=e.id,a=e.email,n=e.mobile;return r["a"].put("users/".concat(t),{email:a,mobile:n})}function u(e){return r["a"].delete("users/".concat(e))}function c(e){return r["a"].get("users/".concat(e))}function l(e){var t=e.id,a=e.rid;return r["a"].put("users/".concat(t,"/role"),{rid:a})}},ecb0:function(e,t,a){}}]);