(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ed61b190"],{"27fb":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"edit"},[a("el-dialog",{attrs:{title:t.editTitle+"参数",visible:t.dialogFormVisible,center:!0},on:{"update:visible":function(e){t.dialogFormVisible=e},closed:t.clearfrom}},[""!=t.formData?a("el-form",{ref:"editForm",attrs:{rules:t.rules,model:t.formData,"label-width":"150px","status-icon":""}},[a("el-form-item",{attrs:{label:t.editTitle.substring(2)+"参数",prop:"attr_name"}},[a("el-input",{attrs:{placeholder:"active"==t.tabType?"请输入动态参数":"请输入静态参数"},model:{value:t.formData.attr_name,callback:function(e){t.$set(t.formData,"attr_name",e)},expression:"formData.attr_name"}})],1),a("el-form-item",{attrs:{label:t.editTitle.substring(2)+"参数值",prop:"attr_vals"}},[a("el-input",{attrs:{placeholder:"active"==t.tabType?"多个参数值以,分隔":"请输入静态参数值"},model:{value:t.formData.attr_vals,callback:function(e){t.$set(t.formData,"attr_vals",e)},expression:"formData.attr_vals"}})],1)],1):t._e(),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.send}},[t._v("确 定")])],1)],1)],1)},n=[],i=(a("96cf"),a("1da1")),s=a("c40e"),o={name:"paramsEdit",props:["editTitle","tabType"],data:function(){return{dialogFormVisible:!1,formData:"",rules:{attr_name:[{required:!0,message:"参数不能为空",trigger:"blur"}],attr_vals:[{required:!0,message:"".concat("active"==this.tabType?"参数值不能为空,多个参数值以,分隔":"参数值不能为空"),trigger:"blur"}]}}},methods:{clearfrom:function(){this.formdata={},this.$refs.editForm.resetFields()},send:function(){var t=this;this.$refs.editForm.validate(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(a){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:if(r="",!t.formData.attr_id){e.next=9;break}return e.next=6,Object(s["g"])(t.formData);case 6:r=e.sent,e.next=12;break;case 9:return e.next=11,Object(s["a"])(t.formData);case 11:r=e.sent;case 12:201===r.data.meta.status||200===r.data.meta.status?(t.$message.success(r.data.meta.msg),t.dialogFormVisible=!1,t.$emit("updateParS")):t.$message.error(r.data.meta.msg);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}},c=o,u=a("2877"),l=Object(u["a"])(c,r,n,!1,null,null,null);e["default"]=l.exports},"3ca3":function(t,e,a){"use strict";var r=a("6547").charAt,n=a("69f3"),i=a("7dd0"),s="String Iterator",o=n.set,c=n.getterFor(s);i(String,"String",(function(t){o(this,{type:s,string:String(t),index:0})}),(function(){var t,e=c(this),a=e.string,n=e.index;return n>=a.length?{value:void 0,done:!0}:(t=r(a,n),e.index+=t.length,{value:t,done:!1})}))},5372:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=this,a=e.$createElement,r=e._self._c||a;return r("div",[r("el-button",{attrs:{type:"primary"},on:{click:e.openEdit}},[e._v("添加"+e._s("active"==e.tabType?"动态":"静态")+"参数")]),""!=e.tabData?r("el-table",{style:{width:"100%","margin-top":"10px"},attrs:{data:e.tabData,border:"","row-key":function(t){return t.attr_id},"expand-row-keys":e.rowKeys}},["active"==e.tabType?r("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._l(t.row.attr_vals,(function(a){return r("el-tag",{key:a,staticStyle:{"margin-left":"20px"},attrs:{closable:"","disable-transitions":!1},on:{close:function(r){return e.handleClose(a,t.row)}}},[e._v(" "+e._s(a)+" ")])})),e.inputVisible?r("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",staticStyle:{"margin-left":"20px"},attrs:{size:"small"},on:{blur:function(a){return e.handleInputConfirm(t.row)}},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.handleInputConfirm(t.row)}},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}):r("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:e.showInput}},[e._v("+ New Tag")])]}}],null,!1,2116709395)}):e._e(),r("el-table-column",{attrs:{label:"序号",type:"index",width:"50px"}}),r("el-table-column",{attrs:{label:"active"==e.tabType?"商品参数":"属性名称",prop:"attr_name"}}),"active"!=e.tabType?r("el-table-column",{attrs:{label:"属性值",prop:"attr_vals"}}):e._e(),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",piano:"",icon:"el-icon-edit"},on:{click:function(a){return e.openEdit(t.row)}}},[e._v("编辑")]),r("el-button",{attrs:{type:"danger",piano:"",icon:"el-icon-delete"},on:{click:function(a){return e.delAtt(t.row.attr_id)}}},[e._v("删除")])]}}],null,!1,666441166)})],1):r("el-empty",[r("el-button",{attrs:{type:"primary"},on:{click:function(){return t.$emit("focusSelect")}}},[e._v("选择分类")])],1),r("paramsEdit",{ref:"paramsEdit",attrs:{tabType:e.tabType,editTitle:e.editTitleP},on:{updateParS:e.updateParFn}})],1)},n=[],i=(a("4160"),a("c975"),a("a15b"),a("a434"),a("ac1f"),a("1276"),a("159b"),a("5530"));a("a4d3"),a("e01a"),a("d28b"),a("d3b7"),a("3ca3"),a("ddb0");function s(t){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}a("96cf");var o=a("1da1"),c=a("c40e"),u=a("27fb"),l={props:["tabType","casId","tabValue"],components:{paramsEdit:u["default"]},data:function(){return{tabData:[],inputVisible:!1,inputValue:"",rowKeys:[],editTitleP:""}},methods:{updateParFn:function(){this.$emit("updatePar")},openEdit:function(t){if(!this.casId)return this.$notify({title:"警告",message:"请先选择分类！",type:"warning"});if(this.$refs.paramsEdit.dialogFormVisible=!0,t.attr_id)if("active"==this.tabType){this.editTitleP="编辑动态";var e=JSON.parse(JSON.stringify(t));e.attr_vals=e.attr_vals.join(","),this.$refs.paramsEdit.formData=e}else this.editTitleP="编辑静态",this.$refs.paramsEdit.formData=JSON.parse(JSON.stringify(t));else"active"==this.tabType?(this.editTitleP="添加动态",this.$refs.paramsEdit.formData={attr_sel:"many",cat_id:this.casId}):(this.editTitleP="添加静态",this.$refs.paramsEdit.formData={attr_sel:"only",cat_id:this.casId})},delAtt:function(t){var e=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(o["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(c["d"])({id:e.casId,attrid:t});case 2:r=a.sent,200==r.data.meta.status?(e.updateParFn(),e.$message({type:"success",message:"删除成功!"})):e.$message.error(r.data.meta.msg);case 4:case"end":return a.stop()}}),a)})))).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},editAtt:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(c["g"])(t);case 2:r=a.sent,200==r.data.meta.status?(e.$message.success(r.data.meta.msg),e.rowKeys=[],e.rowKeys.push(t.attr_id),e.updateParFn()):e.$message.error("object"!=s(r.data.meta.msg)?r.data.meta.msg:"添加失败");case 4:case"end":return a.stop()}}),a)})))()},handleClose:function(t,e){var a=JSON.parse(JSON.stringify(e));a.attr_vals.splice(a.attr_vals.indexOf(t),1).join(","),a.attr_vals=a.attr_vals.join(","),this.editAtt(Object(i["a"])({},a))},showInput:function(){var t=this;this.inputVisible=!0,this.$nextTick((function(){t.$refs.saveTagInput.$refs.input.focus()}))},handleInputConfirm:function(t){if(this.inputValue){var e=JSON.parse(JSON.stringify(t));e.attr_vals.push(this.inputValue),e.attr_vals=e.attr_vals.join(","),this.editAtt(Object(i["a"])({},e)),this.inputVisible=!1,this.inputValue=""}}},created:function(){},watch:{tabValue:function(t,e){t&&t!=e&&(this.tabData=JSON.parse(JSON.stringify(t)),"active"==this.tabType&&this.tabData.forEach((function(t){""==t.attr_vals?t.attr_vals=[]:t.attr_vals=t.attr_vals.split(",")})))}}},d=l,f=(a("f546"),a("2877")),p=Object(f["a"])(d,r,n,!1,null,null,null);e["default"]=p.exports},6067:function(t,e,a){},c40e:function(t,e,a){"use strict";a.d(e,"l",(function(){return i})),a.d(e,"m",(function(){return s})),a.d(e,"c",(function(){return o})),a.d(e,"i",(function(){return c})),a.d(e,"e",(function(){return u})),a.d(e,"j",(function(){return l})),a.d(e,"k",(function(){return m})),a.d(e,"d",(function(){return b})),a.d(e,"g",(function(){return v})),a.d(e,"a",(function(){return g})),a.d(e,"f",(function(){return p})),a.d(e,"b",(function(){return d})),a.d(e,"h",(function(){return f}));a("99af");var r=a("5530"),n=a("b775");function i(t){return n["a"].get("goods",{params:Object(r["a"])({},t)})}function s(t){return n["a"].get("goods/".concat(t))}function o(t){return n["a"].post("goods",Object(r["a"])({},t))}function c(t){return n["a"].put("goods/".concat(t.id),Object(r["a"])({},t))}function u(t){return n["a"].delete("goods/".concat(t))}function l(t){return n["a"].get("categories",{params:{type:t}})}function d(t){return n["a"].post("categories",Object(r["a"])({},t))}function f(t){return n["a"].put("categories/".concat(t.cat_id),Object(r["a"])({},t))}function p(t){return n["a"].delete("categories/".concat(t))}function m(t){return n["a"].get("categories/".concat(t.id,"/attributes"),{params:Object(r["a"])({},t)})}function b(t){return n["a"].delete("categories/".concat(t.id,"/attributes/").concat(t.attrid))}function v(t){return n["a"].put("categories/".concat(t.cat_id,"/attributes/").concat(t.attr_id),Object(r["a"])({},t))}function g(t){return n["a"].post("categories/".concat(t.cat_id,"/attributes"),Object(r["a"])({},t))}},d28b:function(t,e,a){var r=a("746f");r("iterator")},ddb0:function(t,e,a){var r=a("da84"),n=a("fdbc"),i=a("e260"),s=a("9112"),o=a("b622"),c=o("iterator"),u=o("toStringTag"),l=i.values;for(var d in n){var f=r[d],p=f&&f.prototype;if(p){if(p[c]!==l)try{s(p,c,l)}catch(b){p[c]=l}if(p[u]||s(p,u,d),n[d])for(var m in i)if(p[m]!==i[m])try{s(p,m,i[m])}catch(b){p[m]=i[m]}}}},e01a:function(t,e,a){"use strict";var r=a("23e7"),n=a("83ab"),i=a("da84"),s=a("5135"),o=a("861d"),c=a("9bf2").f,u=a("e893"),l=i.Symbol;if(n&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var d={},f=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof f?new l(t):void 0===t?l():l(t);return""===t&&(d[e]=!0),e};u(f,l);var p=f.prototype=l.prototype;p.constructor=f;var m=p.toString,b="Symbol(test)"==String(l("test")),v=/^Symbol\((.*)\)[^)]+$/;c(p,"description",{configurable:!0,get:function(){var t=o(this)?this.valueOf():this,e=m.call(t);if(s(d,t))return"";var a=b?e.slice(7,-1):e.replace(v,"$1");return""===a?void 0:a}}),r({global:!0,forced:!0},{Symbol:f})}},f546:function(t,e,a){"use strict";var r=a("6067"),n=a.n(r);n.a}}]);